% Step response ref 40.rpm 
% PID : 1.2 1.25 0.4 
% Filter : 0.1
% Sample_Time 100 ms
V = [
0.00		0.00
3.33		0.00
13.33		0.00
13.33		0.00
16.67		6.67
16.67		20.00
20.00		20.00
20.00		23.33
23.33		23.33
23.33		23.33
26.67		26.67
26.67		30.00
30.00		30.00
30.00		26.67
30.00		30.00
33.33		36.67
33.33		30.00
36.67		43.33
33.33		33.33
33.33		33.33
36.67		43.33
36.67		36.67
36.67		36.67
36.67		36.67
43.33		56.67
36.67		33.33
40.00		46.67
40.00		53.33
36.67		36.67
43.33		53.33
43.33		40.00
36.67		43.33
36.67		43.33
40.00		46.67
40.00		33.33
43.33		43.33
40.00		36.67
36.67		36.67
53.33		56.67
40.00		33.33
40.00		43.33
40.00		46.67
46.67		43.33
40.00		43.33
40.00		36.67
40.00		53.33
46.67		36.67
46.67		46.67
36.67		43.33
43.33		46.67
43.33		50.00
40.00		40.00
36.67		30.00
36.67		36.67
43.33		40.00
36.67		40.00
40.00		46.67
36.67		33.33
43.33		26.67
43.33		53.33
36.67		36.67
40.00		43.33
36.67		33.33
43.33		43.33
43.33		46.67
36.67		33.33
36.67		36.67
50.00		46.67
36.67		33.33
36.67		33.33
53.33		53.33
50.00		43.33
50.00		50.00
43.33		36.67
33.33		40.00
40.00		46.67
40.00		43.33
50.00		46.67
33.33		26.67
33.33		33.33
36.67		30.00
40.00		36.67
40.00		46.67
36.67		33.33
36.67		40.00
40.00		43.33
40.00		43.33
36.67		30.00
36.67		30.00
43.33		36.67
36.67		40.00
36.67		40.00
40.00		43.33
43.33		30.00
36.67		46.67
46.67		40.00
33.33		30.00
36.67		33.33
33.33		40.00
40.00		36.67
36.67		46.67
36.67		43.33
40.00		36.67
40.00		36.67
40.00		40.00
36.67		36.67
46.67		43.33
36.67		33.33
46.67		43.33
40.00		46.67
40.00		36.67
36.67		36.67
40.00		30.00
46.67		60.00
40.00		33.33
36.67		36.67
50.00		63.33
43.33		50.00
36.67		43.33
40.00		40.00
40.00		46.67
36.67		43.33
46.67		40.00
36.67		43.33
33.33		33.33
30.00		43.33
33.33		33.33
40.00		46.67
30.00		40.00
36.67		43.33
33.33		33.33
33.33		40.00
36.67		36.67
33.33		36.67
40.00		40.00
30.00		30.00
30.00		30.00
40.00		40.00
33.33		33.33
36.67		33.33
33.33		40.00
36.67		33.33
36.67		36.67
36.67		40.00
36.67		40.00
43.33		46.67
33.33		30.00
36.67		36.67
36.67		40.00
33.33		36.67
33.33		43.33
36.67		50.00
33.33		30.00
33.33		30.00
36.67		40.00
33.33		43.33
33.33		33.33
40.00		43.33
33.33		46.67
33.33		33.33
36.67		36.67
40.00		53.33
36.67		43.33
36.67		43.33
33.33		36.67
36.67		46.67
33.33		43.33
30.00		43.33
33.33		40.00
33.33		30.00
33.33		36.67
33.33		60.00
40.00		46.67
33.33		36.67
40.00		50.00
33.33		36.67
40.00		53.33
33.33		36.67
40.00		46.67
43.33		40.00
30.00		36.67
36.67		46.67
36.67		50.00
40.00		43.33
40.00		43.33
30.00		46.67
30.00		30.00
30.00		36.67
33.33		33.33
30.00		33.33
36.67		53.33
33.33		36.67
40.00		36.67
56.67		46.67
73.33		43.33
70.00		36.67
63.33		50.00
63.33		50.00
76.67		43.33
66.67		46.67
63.33		46.67
60.00		40.00
60.00		43.33
53.33		30.00
50.00		26.67
63.33		43.33
50.00		36.67
50.00		40.00
50.00		36.67
43.33		40.00
43.33		30.00
50.00		43.33
43.33		36.67
40.00		26.67
43.33		43.33
40.00		46.67
40.00		30.00
36.67		30.00
40.00		36.67
43.33		43.33
43.33		36.67
33.33		36.67
43.33		40.00
33.33		40.00
40.00		40.00
40.00		53.33
46.67		33.33
36.67		33.33
40.00		50.00
36.67		36.67
43.33		36.67
36.67		46.67
33.33		43.33
36.67		43.33
36.67		50.00
43.33		36.67
36.67		43.33
36.67		36.67
36.67		43.33
40.00		30.00
40.00		36.67
33.33		33.33
36.67		30.00
36.67		26.67
40.00		13.33
43.33		23.33
36.67		16.67
46.67		30.00
36.67		23.33
36.67		20.00
40.00		20.00
40.00		20.00
36.67		30.00
40.00		23.33
40.00		33.33
36.67		23.33
43.33		66.67
46.67		30.00
36.67		26.67
36.67		26.67
40.00		26.67
40.00		33.33
46.67		36.67
40.00		50.00
36.67		26.67
40.00		26.67
40.00		33.33
40.00		20.00
40.00		36.67
40.00		26.67
43.33		36.67
36.67		30.00
40.00		26.67
36.67		26.67
36.67		26.67
40.00		10.00
43.33		30.00
40.00		23.33
36.67		20.00
40.00		33.33
40.00		13.33
36.67		30.00
40.00		33.33
40.00		26.67
40.00		26.67
40.00		26.67
40.00		46.67
46.67		43.33
40.00		66.67
40.00		56.67
36.67		46.67
36.67		50.00
40.00		40.00
36.67		46.67
40.00		56.67
40.00		50.00
43.33		53.33
43.33		46.67
36.67		36.67
40.00		33.33
40.00		33.33
40.00		30.00
40.00		53.33
40.00		46.67
36.67		53.33
40.00		60.00
40.00		76.67
40.00		83.33
40.00		63.33
53.33		73.33
40.00		60.00
43.33		66.67
40.00		73.33
43.33		66.67
46.67		63.33
40.00		46.67
40.00		60.00
40.00		43.33
46.67		70.00
36.67		56.67
40.00		53.33
46.67		53.33
36.67		46.67
40.00		43.33
36.67		43.33
43.33		50.00
43.33		40.00
40.00		46.67
43.33		40.00
33.33		33.33
43.33		43.33
36.67		40.00
36.67		33.33
36.67		43.33
43.33		36.67
36.67		40.00
43.33		36.67
43.33		53.33
36.67		33.33
36.67		40.00
40.00		40.00
40.00		43.33
36.67		33.33
36.67		33.33
43.33		50.00
36.67		36.67
40.00		36.67
43.33		43.33
36.67		36.67
33.33		33.33
46.67		43.33
43.33		43.33
40.00		40.00
36.67		43.33
36.67		40.00
36.67		30.00
36.67		30.00
50.00		50.00
43.33		43.33
40.00		40.00
36.67		33.33
46.67		50.00
40.00		53.33
40.00		40.00
40.00		30.00
43.33		46.67
36.67		36.67
43.33		50.00
43.33		50.00
36.67		33.33
36.67		33.33
40.00		46.67
50.00		43.33
40.00		36.67
43.33		46.67
33.33		33.33
36.67		36.67
43.33		40.00
43.33		46.67
36.67		33.33
46.67		46.67
36.67		40.00

];

Av = 31;
Z = zeros((Av-1)/2, 2);
V = [Z ; V];

V_left_new = V(:,1);
V_right_new = V(:,2);

for n=(Av+1)/2:1:length(V)-((Av-1)/2)
    V_left_new(n) = 0;
    V_right_new(n) = 0;
    for v = -1*((Av-1)/2) : 1 : ((Av-1)/2)
        V_left_new(n) = V_left_new(n) + V(n-v,1) ;
        V_right_new(n) = V_right_new(n) + V(n-v,2) ;
    end
    V_left_new(n) = V_left_new(n) / Av;
    V_right_new(n) = V_right_new(n) / Av;
end
V_left = V(:,1);
V_right = V(:,2);

figure;
%plot(V_left);
plot(V_left_new);
hold on;
%plot(V_right);
plot(V_right_new);
hold off;